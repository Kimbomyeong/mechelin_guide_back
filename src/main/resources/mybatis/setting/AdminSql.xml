<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="admin">

	<select id="selectAllOfUser" resultType="udto" parameterType="HashMap">
	SELECT * FROM user WHERE NOT authority = 'ROLE_ADMIN' ORDER BY id LIMIT #{startPage}, #{dataCount}
	</select>
	
	<select id="selectCountOfUser" resultType="int">
	SELECT count(*) FROM user WHERE NOT authority = 'ROLE_ADMIN' ORDER BY id
	</select>
	
	<select id="searchDataOfUser" resultType="udto" parameterType="HashMap">
	SELECT * FROM user WHERE id = #{searchData} OR nickname = #{searchData} OR email = #{searchData} 
	OR created_at = #{searchData} ORDER BY id LIMIT #{startPage}, #{dataCount}
	</select>
	
	<select id="sortDataOfUser" resultType="udto" parameterType="HashMap">
	SELECT * FROM user 
		<if test="#{sorting} == true">
		ORDER BY created_at desc
		</if>
		<if test="#{sorting} != false">
		ORDER BY created_at 
		</if>
	LIMIT #{startPage}, #{dataCount}
	</select>
	
	<select id="filterDataOfUser" resultType="udto" parameterType="HashMap">
	SELECT * FROM user 
		<if test="#{authority} != null and dropuser != null">
		WHERE authority = #{authority} and dropuser = #{dropuser} 
		</if>
		<if test="#{authority} != null">
		WHERE authority = #{authority} 
		</if>
		<if test="dropuser != null">
		WHERE dropuser = #{dropuser} 
		</if>
	ORDER BY id LIMIT #{startPage}, #{dataCount}
	</select>
	
</mapper>